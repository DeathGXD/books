在YARN中，调度意味着对集群中运行的应用的集群资源分配。调度器是ResourceManager服务核心的组件之一并且它负责基于container资源请求的资源分配。随机存取存储器(RAM)和处理器是每个container执行的所必须的两个决定性的资源。随着container并发量的增加，对于每个container来说合理的需求和集群中资源的管理将会成为应用执行成功与否的决定性因素。  

在本章，你将会学习到关于YARN中的调度机制和YARN中的调度器如何配置。你同样也会学习到关于YARN中的队列和不一样的可用的调度算法。  

我们将会涉及到下面的主题：  
* 介绍YARN中的调度
* 介绍队列和队列类型
* 容量调度器
* 公平调度器  

### 介绍YARN中的调度  
YARN中的调度器是为了管理集群的资源而编写的高效的算法。YARN中的ResourceManager服务拥有一个可插拔的纯粹的调度器组件，也就是说，它不负责跟踪和监控集群中应用的执行。它仅仅负责跟运行的应用分配资源。  

你可能想问，什么是资源分配？为什么它很重要？好吧，让我们设想一个简单的场景。假设一个机构拥有一个100台节点的Hadoop-YARN集群并且有N个团队(比如A、B、... N)使用着这个集群。每个团队有10到15个成员并且每个成员都可以提交在集群上提交应用。那么，对象集群管理员来说，想要提供一个共享的多租户和高效利用率的集群，集群资源分配就扮演了一个非常重要的角色。集群的资源可以基于一个可插拔的策略对不同的团队或者团队成员进行划分。当在定义集群如何共享的参数时，调度器应该足够灵活以达到支持下面的场景：  
![image](/Images/YARN/YARN-cluster-resource-allocation-scenario.png)  
* 假设团队A工作的客户端要求所有的任务需要40%的集群资源。那么集群管理员就需要确保团队A工作的客户端所需要的集群资源是合适的。
* 一个团队可能有多个子团队，那么集群中的资源需要在那些子团队之间共享。意思是，如果集群中20%的资源分配给了团队N，那么这20%的集群资源需要在不同的子团队中进行共享，分散。  

Hadoop-YARN集群有下面列举出来的两个预先定义好的调度器：  
* 容量调度器(Capacity scheduler)：这是一个按照集群资源总量百分比进行分配的调度器
* 公平调度器(Fair scheduler)：这是一个基于内存和处理器需求进行分配的调度器  

想要配置和使用调度器，管理员首先需要定义队列。在我们深入讨论这么调度器的细节之前，我们首先会学习学习一些队列的概念以及YARN中定义的不同类型的队列。  

### 初识队列  
对于提交到YARN集群上的应用来说，队列就相当于是数据结构或者说是占位符。队列是提交到YARN集群上的应用的逻辑分组。应用总是会被提交到队列中。
